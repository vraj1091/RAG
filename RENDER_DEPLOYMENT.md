# üöÄ Render.com Deployment Guide (Free Tier)

## Quick Deploy with Blueprint (5 Minutes)

### Step 1: Prepare Your Repository

1. **Push to GitHub:**
```bash
cd ai-rag-chatbot-python_v7
git init
git add .
git commit -m "Initial commit for Render deployment"
git branch -M main
git remote add origin https://github.com/YOUR_USERNAME/YOUR_REPO.git
git push -u origin main
```

### Step 2: Deploy on Render

1. **Go to Render Dashboard:**
   - Visit: https://dashboard.render.com
   - Sign up/Login with GitHub

2. **Create New Blueprint:**
   - Click "New +" ‚Üí "Blueprint"
   - Connect your GitHub repository
   - Render will automatically detect `render.yaml`
   - Click "Apply"

3. **Wait for Deployment:**
   - Backend: ~5-10 minutes
   - Frontend: ~3-5 minutes
   - Database: ~2 minutes

### Step 3: Access Your App

After deployment completes:
- **Frontend URL**: `https://rag-chatbot-frontend.onrender.com`
- **Backend URL**: `https://rag-chatbot-backend.onrender.com`
- **API Docs**: `https://rag-chatbot-backend.onrender.com/docs`

---

## Alternative: Manual Deployment (Without Blueprint)

### Deploy Backend

1. **New Web Service:**
   - Dashboard ‚Üí "New +" ‚Üí "Web Service"
   - Connect GitHub repository
   - Select `backend/RAG_chatbot` directory

2. **Configure:**
   - **Name**: `rag-chatbot-backend`
   - **Region**: Oregon (Free)
   - **Branch**: main
   - **Root Directory**: `backend/RAG_chatbot`
   - **Runtime**: Python 3
   - **Build Command**: `pip install -r requirements.txt`
   - **Start Command**: `uvicorn main:app --host 0.0.0.0 --port $PORT`

3. **Environment Variables:**
```
DB_HOST=localhost
DB_PORT=3306
DB_NAME=rag_chatbot
DB_USER=root
DB_PASSWORD=<auto-generated>
SECRET_KEY=<generate-random-string>
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_MODEL_NAME=llama3.2:latest
FRONTEND_URL=https://your-frontend-url.onrender.com
DEBUG=false
LOG_LEVEL=INFO
```

4. **Click "Create Web Service"**

### Deploy Frontend

1. **New Static Site:**
   - Dashboard ‚Üí "New +" ‚Üí "Static Site"
   - Connect same GitHub repository

2. **Configure:**
   - **Name**: `rag-chatbot-frontend`
   - **Region**: Oregon (Free)
   - **Branch**: main
   - **Root Directory**: `frontend`
   - **Build Command**: `npm install && npm run build`
   - **Publish Directory**: `build`

3. **Environment Variables:**
```
REACT_APP_API_URL=https://rag-chatbot-backend.onrender.com/api/v1
REACT_APP_APP_NAME=AI RAG Chatbot
REACT_APP_VERSION=2.0.0
```

4. **Add Rewrite Rule:**
   - Source: `/*`
   - Destination: `/index.html`
   - Action: Rewrite

5. **Click "Create Static Site"**

### Add Database (Optional)

1. **New PostgreSQL:**
   - Dashboard ‚Üí "New +" ‚Üí "PostgreSQL"
   - **Name**: `rag-chatbot-db`
   - **Database**: `rag_chatbot`
   - **User**: `rag_user`
   - **Region**: Oregon (Free)
   - **Plan**: Free

2. **Update Backend Environment:**
   - Copy database connection string
   - Update `DB_HOST`, `DB_PORT`, `DB_NAME`, `DB_USER`, `DB_PASSWORD`

---

## Important Notes for Render Free Tier

### ‚ö†Ô∏è Limitations

1. **Services spin down after 15 minutes of inactivity**
   - First request after sleep takes ~30 seconds
   - Solution: Use a cron job to ping every 10 minutes

2. **No Ollama on Free Tier**
   - Ollama requires persistent storage and GPU
   - Solution: Use external API (OpenAI, Anthropic) or upgrade to paid plan
   - Alternative: Deploy Ollama separately on another service

3. **750 hours/month free**
   - Enough for 1 service running 24/7
   - Multiple services share this limit

4. **Limited Resources**
   - 512 MB RAM
   - 0.1 CPU
   - 1 GB disk space

### üîß Workarounds

**For AI Model (Since Ollama won't work on free tier):**

Option 1: Use OpenAI API (Recommended)
```python
# Update backend to use OpenAI instead
# Add to requirements.txt: openai
# Update .env:
OPENAI_API_KEY=your-key-here
USE_OPENAI=true
```

Option 2: Use Hugging Face Inference API (Free)
```python
# Add to requirements.txt: huggingface_hub
# Update .env:
HUGGINGFACE_API_KEY=your-key-here
USE_HUGGINGFACE=true
```

Option 3: Deploy Ollama on separate service
- Use Railway.app for Ollama (has GPU support)
- Point OLLAMA_BASE_URL to Railway URL

**Keep Service Awake:**
```bash
# Use cron-job.org or similar
# Ping every 10 minutes:
curl https://rag-chatbot-backend.onrender.com/health
```

---

## Deployment Checklist

### Before Deployment
- [ ] Code pushed to GitHub
- [ ] All secrets removed from code
- [ ] `.env` files not committed (in .gitignore)
- [ ] `render.yaml` configured
- [ ] Dockerfiles created
- [ ] Dependencies listed in requirements.txt and package.json

### After Deployment
- [ ] Backend health check passes
- [ ] Frontend loads correctly
- [ ] Database connected (if using)
- [ ] Environment variables set
- [ ] Test user registration
- [ ] Test login
- [ ] Test chat functionality
- [ ] Check logs for errors

---

## Troubleshooting

### Backend Build Fails
```bash
# Check build logs in Render dashboard
# Common issues:
# - Missing dependencies in requirements.txt
# - Python version mismatch
# - Build timeout (increase in settings)
```

### Frontend Build Fails
```bash
# Common issues:
# - Missing dependencies in package.json
# - Build command incorrect
# - Environment variables not set
# - Memory limit exceeded
```

### Database Connection Error
```bash
# Verify:
# - Database is created and running
# - Connection string is correct
# - Database user has permissions
# - Firewall allows connection
```

### Service Keeps Sleeping
```bash
# Free tier limitation
# Solutions:
# 1. Upgrade to paid plan ($7/month)
# 2. Use cron job to keep awake
# 3. Accept 30s cold start
```

---

## Cost Optimization

**Free Tier (Current Setup):**
- Backend: Free (with sleep)
- Frontend: Free
- Database: Free (1GB)
- Total: $0/month

**Paid Tier (Always On):**
- Backend: $7/month
- Frontend: Free
- Database: $7/month (if needed)
- Total: $7-14/month

---

## Next Steps

1. ‚úÖ Push code to GitHub
2. ‚úÖ Deploy using render.yaml blueprint
3. ‚úÖ Wait for deployment to complete
4. ‚úÖ Test your live app
5. ‚úÖ Set up custom domain (optional)
6. ‚úÖ Configure SSL (automatic on Render)

---

## Support

- **Render Docs**: https://render.com/docs
- **Community**: https://community.render.com
- **Status**: https://status.render.com

Your app will be live at:
- Frontend: `https://rag-chatbot-frontend.onrender.com`
- Backend: `https://rag-chatbot-backend.onrender.com`

üéâ **You're ready to deploy!**
